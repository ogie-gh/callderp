name: Matrix from External JSON file
on:
  workflow_dispatch:

jobs:
  scan-accounts:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout this repo
        uses: actions/checkout@v4

      - name: Checkout matrix repo
        uses: actions/checkout@v4
        with:
          repository: ogie-gh/derp
          path: derp

      - name: Load Matrix
        id: load-matrix
        run: |
          matrix=$(cat ogie-gh/derp/config/matrix.json)
          echo "matrix=$matrix" >> $GITHUB_ENV

      - name: Run with matrix
        run: echo ${{ matrix.matrix }}
