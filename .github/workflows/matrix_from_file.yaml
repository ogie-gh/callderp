name: Matrix from External JSON file
on:
  workflow_dispatch:

jobs:
  scan-accounts:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout this repo
        uses: actions/checkout@v4

      - name: Checkout matrix repo
        uses: actions/checkout@v4
        with:
          repository: ogie-gh/derp
          path: derp

      - name: Check dir layout
        run: ls -l

      - name: Load Matrix
        id: load-matrix
        run: echo "PACKAGE_JSON=$(jq -c . < derp/config/matrix.json)" >> $GITHUB_ENV

      - name: Run with matrix
        run: echo '${{ fromJson(env.PACKAGE_JSON).version }}'
